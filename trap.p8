pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--gameplay functions--

function game_init()
	p1={}
	p2={}
	
	p1.sp=1
	p1.x=63
	p1.y=63
	p1.hflip=false
	p1.spd=1.5
	p1.atimer=0
	p1.dead=false
	
	p2.sp=7
	p2.x=83
	p2.y=63
	p2.hflip=false
	p2.spd=1.5
	p2.atimer=0
	p2.dead=false
	
	wave=1
end


function game_update()
	player_movement()
end

function game_draw()
	cls()
	map()
	
	if (p1_ready==true) spr(p1.sp,p1.x,p1.y,1,1,p1.hflip)
	if (p2_ready==true) spr(p2.sp,p2.x,p2.y,1,1,p2.hflip)

	print("wave "..wave,0,120,7)
	p1_ready=true
end

function player_movement()
	if (btn(‚¨ÖÔ∏è)) p1.x-=p1.spd p1.sp=3 p1.hflip=true
	if (btn(‚û°Ô∏è)) p1.x+=p1.spd p1.sp=3 p1.hflip=false
	if (btn(‚¨ÜÔ∏è)) p1.y-=p1.spd p1.sp=5 p1.hflip=false
	if (btn(‚¨áÔ∏è)) p1.y+=p1.spd p1.sp=1 p1.hflip=false
	
	if (btn(‚¨ÖÔ∏è,1)) p2.x-=p2.spd p2.sp=9 p2.hflip=true
	if (btn(‚û°Ô∏è,1)) p2.x+=p2.spd p2.sp=9 p2.hflip=false
	if (btn(‚¨ÜÔ∏è,1)) p2.y-=p2.spd p2.sp=11 p2.hflip=false
	if (btn(‚¨áÔ∏è,1)) p2.y+=p2.spd p2.sp=7 p2.hflip=false
end
-->8
--main menu functions--

function menu_init()
	camera_y=0
	camera_y_spd=0.05
	
	logo={}
	
	logo.x=24
	logo.y=0.2
	logo.y_off=30
	logo.spd=0.01
	logo.amp=3
	
	
	button_color=7
	button_timer=0
	button_frequency=20
	
	start_timer=0
	start_press=false
end


function menu_update()

	if button_timer>button_frequency then
		if button_color==7 then
			button_color=0
		else
			button_color=7
		end
		
		button_timer=0
	end
	
	button_timer+=1
	
	logo.y+=logo.spd
	
	if btnp(‚ùé) or btnp(üÖæÔ∏è) then
		start_press=true
		sfx(0)
	end
	
	if start_press==true then
		button_frequency=3
		
		if start_timer>40 then
			if (start_timer==41) sfx(1)
			if start_timer>100 then
				camera(0,0)
				scene=2
			end
			
			camera(0,camera_y)
			camera_y+=camera_y_spd
			camera_y_spd=camera_y_spd*1.1
		end
		
		start_timer+=1
	end
	
end


function menu_draw()
	cls()
	map(16)
	spr(19,24,(sin(logo.y)*logo.amp)+logo.y_off,10,4)
	
	print("press any button",30,80,button_color)
	
	print("by tom sybert      hackumbc 2024",0,120,7)
	
	
end
-->8
--char select functions--

function select_init()
	camera(0,0)
	
	camera_sel_y=0
	camera_sel_y_spd=25.7
	sel_timer=0
	
	ready_text="please join the game"
	
	p1_ready=false
	p2_ready=false
	p1_text="press üÖæÔ∏è"
	p2_text="press üÖæÔ∏è"
	p1_x=17
	p2_x=80
end


function select_update()
	if camera_sel_y<=0 then
		camera_sel_y=0
	end
	
	camera(0,camera_sel_y)
	camera_sel_y+=camera_sel_y_spd
	camera_sel_y_spd=camera_sel_y_spd*0.9
	
	sel_timer+=1
	
	if btnp(üÖæÔ∏è) then
		if p1_ready then
			camera(0,0)
			scene=3
		end
	end
	
	if btnp(üÖæÔ∏è,1) then
		if p2_ready then
			camera(0,0)
			scene=3
		end
	end
	
	if btnp(üÖæÔ∏è) then
		p1_text="ready!"
		p1_ready=true
		p1_x=22
	end
	
	if btnp(üÖæÔ∏è,1) then
		p2_text="ready!"
		p2_ready=true
		p2_x=85
	end
	
	if p1_ready or p2_ready then
			ready_text="press üÖæÔ∏è again to start!"
	end
end


function select_draw()
	cls()
		
	map(32)
	
	if sel_timer>1 then
		rect(1,129+128,63,230+128,7)
		rect(65,129+128,127,230+128,7)
		rect(1,232+128,127,255+128,7)
	
		rectfill(3,131+128,11,137+128,7)
		print("p1",4,132+128,0)
		print(p1_text,p1_x,170+128,7)
		if (p1_ready) spr(29,p1_x+25,170+128-4)
	
		rectfill(67,131+128,75,137+128,7)
		print("p2",68,132+128,0)
		print(p2_text,p2_x,170+128,7)
		if (p2_ready) spr(29,p2_x+25,170+128-4)
	
		print(ready_text,20,241+128,7)
	end
end
-->8
--main functions--

function _init()
	scene=1
	
	game_init()
	select_init()
	menu_init()
end


function _update()
	
	if scene==1 then
		menu_update()
	elseif scene==2 then
		select_update()
	elseif scene==3 then
		game_update()
	end

end


function _draw()
	
	if scene==1 then
		menu_draw()
	elseif scene==2 then
		select_draw()
	elseif scene==3 then
		game_draw()
	end

end
__gfx__
00000000000880000009900000008000000090000008800000099000000bb000000220000000b00000002000000bb000000220000dddddd00dddddd00ddd6dd0
00000000000880000009900000008800000099000088880000999900000bb000000220000000bb000000220000bbbb0000222200d666666dd666666dd666d88d
00700700000880000009900000008880000099900888888009999990000bb000000220000000bbb0000022200bbbbbb002222220d666666dd666666dd666d88d
00077000000880000009900088888888999999998888888899999999000bb00000022000bbbbbbbb22222222bbbbbbbb22222222d666666dd666666dd666d88d
00077000888888889999999988888888999999990008800000099000bbbbbbbb22222222bbbbbbbb22222222000bb000000220006dddddd6d666666dd666d88d
007007000888888009999990000088800000999000088000000990000bbbbbb0022222200000bbb000002220000bb00000022000d888888dd666666dd666d88d
0000000000888800009999000000880000009900000880000009900000bbbb00002222000000bb0000002200000bb00000022000d888888d0d6666d0d666d88d
00000000000880000009900000008000000090000008800000099000000bb000000220000000b00000002000000bb000000220000dddddd000dddd000ddd6dd0
55555555555555555555555500000000000055555550000055555555555550000000000055555555000000005555555000000000000000000088880000888800
56666666666666666666666505555555555555555555500555555555555555500000000555555555500000055555555555550000000000000899998008999980
56666666666666666666666555555555555555555555550555555555555555550000000555555555550000055555555555555500000000b08999979889999998
5666666666666666666666655555555555555777775555555577777777775555500000555577777555000005557777555555555000000b008999997889999998
56666666666666666666666555577777777777777777555555777777777777555000005557777775555000055577777777755550b000b0008999999889999998
566666666666666666666665555777777777777777775555557777555557775555000055577777775550000555777555577755550b0b00008999999889999798
5666666666666666666666655557777777777777777755555577755555557775550000555777577755500005557755555577755500b000000899998008997980
56666666666666666666666555577777777777777777555555777755555777555500055557755577555000055577755557775555000000000088880000888800
56666666666666666666666555555557777775555555555555777775577777755000055577755577555000055577777777755550000000000088880000888800
56666666666666666666666555555555777755555555555555777777777777750000055577755577555500055577777775555500000000000899998008979980
56666666666666666666666505555555777755555555550555777777777777755000055577775777755500055577755555555000000000008999999889799998
56666666666666666666666500000555777755500000000555777555555777555500055577777777755500055577555555550000000000008999999889999998
56666666666666666666666500000555777755500000000555777555555557755550055577777777755500055577555555000000000000008799999889999998
56666666666666666666666500000555777755500000000555577755555555775550555777755777755500055577555000000000000000008979999889999998
56666666666666666666666500000555777755500000000055577755500555775550555777555577755550055577555000000000000000000899998008999980
56666666666666666666666500000555777755500000000055577755500555775550555777555557775550055577555000000000000000000088880000888800
56666666666666666666666500000555777755500000000055577755500555775550555775555557775550055577555000000000000000000000000000000000
56666666666666666666666500000555777755500000000055577755500555775550555775555557775550055577555000000000000000000000000000000000
56666666666666666666666500000555777755500000000055577755500555775555555755555555775550055577555000000000000000000000000000000000
56666666666666666666666500000555777755500000000055577755500555775555557755500555775555055575555000000000000000000000000000000000
56666666666666666666666500000555777755500000000055577755500555775555557755500555577555055575550000000000000000000000000000000000
56666666666666666666666500000555555555500000000055555755500555575555557755500055557555055575550000000000000000000000000000000000
56666666666666666666666500000055555555500000000055555555500555555555557755500005557555555555550000000000000000000000000000000000
55555555555555555555555500000005555555000000000005555555000055555555555555500000555555555555550000000000000000000000000000000000
00000000000000000000000000000000000000000000000000505550000000555055555555000000055555505555500000000000000000000000000000000000
__map__
1011111111111111111111111111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3031313131313131313131313131313200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400002b7552b755007052b7552b755307052b7552b755237052b7552b755237052b7552b755237050070500705007050070500705007050070500705007050070500705007050070500705007050070500705
000e000004751047510475104751047510575106751087510b7510e7511175113751147511475114751147511375111751107510d7510a7510875107751067510575105751047510475104751047510475104751
